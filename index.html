<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Safe Generator (Demo)</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; background:#0f1720; color:#e6eef6; padding:20px; }
    .btn { padding:10px 16px; border-radius:6px; margin-right:8px; border:none; cursor:pointer; }
    .start { background:#16a34a; color:white; }
    .stop  { background:#ef4444; color:white; }
    #status { margin-top:12px; font-weight:600; }
    #logs { margin-top:18px; background:#071022; padding:12px; border-radius:8px; max-height:420px; overflow:auto; font-family:monospace; font-size:13px; }
  </style>
</head>
<body>
  <h1>Safe Generator Demo (HTML)</h1>
  <p>This demo <strong>does not</strong> query Discord. It simulates checks and shows retry behavior safely.</p>

  <button class="btn start" id="startBtn">Start</button>
  <button class="btn stop" id="stopBtn">Stop</button>

  <div id="status">Running: false</div>

  <h3>Logs</h3>
  <div id="logs">No logs yet.</div>

  <script>
    document.getElementById("startBtn").onclick = async () => {
      await fetch("/start", {method: "POST"});
    };
    document.getElementById("stopBtn").onclick = async () => {
      await fetch("/stop", {method: "POST"});
    };

    async function update() {
      try {
        let s = await (await fetch("/status")).json();
        document.getElementById("status").innerText = "Running: " + s.running;

        let l = await (await fetch("/logs")).json();
        let html = l.logs.map(x => `<div>${x}</div>`).join("");
        document.getElementById("logs").innerHTML = html || "No logs yet.";
        // autoscroll
        let logsDiv = document.getElementById("logs");
        logsDiv.scrollTop = logsDiv.scrollHeight;
      } catch (e) {
        console.error(e);
      }
    }
    setInterval(update, 1000);
    update();
  </script>
</body>
</html>
